# .gitea/pipelines.yml
version: "1"
name: Gitea Actions Demo
run-name: ${{ gitea.actor }} is testing out Gitea Actions
on: [push]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Install dependencies
        image: node:18
        runs: |
          npm install
    
      - name: Run tests
        image: node:18
        runs: |
          npm test
    
      - name: Deploy
        image: node:18
        runs: |
          ssh gitea@192.168.178.51 "cd /home/gitea/Downloads/data/ && git pull && npm install && pm2 restart app"
